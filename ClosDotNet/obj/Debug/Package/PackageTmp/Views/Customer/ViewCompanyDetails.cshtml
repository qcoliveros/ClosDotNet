@using ClosDotNet.Resources.Resources;

@model ClosDotNet.Models.CompanyCustomerViewModel

@{
    ViewBag.Title = CustomerResources.TitleCompanyDetails;
    ViewBag.ActiveMenu = "Customer";
    ViewBag.ActiveSubMenu = "CustomerDetails";
}

@using (Html.BeginForm("SaveCompanyCustomer", "Customer", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.Partial("Message")
    <fieldset>
        <legend>@CustomerResources.TitleCompanyDetails</legend>

        <section id="customerForm">
            <table class="table table-bordered table-condensed">
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.CustomerName, new { @class = "control-label" })
                    </td>
                    <td class="fieldvalue">
                        @Html.TextBoxFor(m => m.CustomerName, new { @class = "form-control input-sm" })
                        @Html.ValidationMessageFor(m => m.CustomerName, "", new { @class = "text-danger" })
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.PreviousCustomerName, new { @class = "control-label" })
                    </td>
                    <td class="fieldvalue">
                        @Html.DisplayFor(m => m.PreviousCustomerName)
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.CifNumber, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CifNumber)
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.Constitution, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.DropDownListFor(
                            m => m.Constitution,
                            (IList<SelectListItem>) ViewBag.ConstitutionList,
                            CommonResources.OptionPleaseSelect,
                            new { @class = "form-control input-sm" })
                        @Html.ValidationMessageFor(m => m.Constitution, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.MandatoryInfoNotAvailableInd, new { @class = "control-label" })
                    </td>
                    <td colspan="3">
                        @Html.CheckBoxFor(m => m.MandatoryInfoNotAvailableInd)
                        @Html.ValidationMessageFor(m => m.MandatoryInfoNotAvailableInd, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        <label class="control-label">@CustomerResources.LabelDetailId</label>
                    </td>
                    <td colspan="3">
                        @Html.Partial("_IdDetail", Model)
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.IncorporationCountry, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.DropDownListFor(
                            m => m.IncorporationCountry,
                            (IList<SelectListItem>) ViewBag.CountryList,
                            CommonResources.OptionPleaseSelect,
                            new { @class = "form-control input-sm" })
                        @Html.ValidationMessageFor(m => m.IncorporationCountry, "", new { @class = "text-danger" })
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.IncorporationDate, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.IncorporationDate, new { @class = "form-control input-sm datepicker" })
                        @Html.ValidationMessageFor(m => m.IncorporationDate, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.BusinessOperationCountry, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.DropDownListFor(
                            m => m.BusinessOperationCountry,
                            (IList<SelectListItem>)ViewBag.CountryList,
                            CommonResources.OptionPleaseSelect,
                            new { @class = "form-control input-sm" })
                        @Html.ValidationMessageFor(m => m.BusinessOperationCountry, "", new { @class = "text-danger" })
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.Classification, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.DropDownListFor(
                            m => m.Classification,
                            (IList<SelectListItem>)ViewBag.ClassificationList,
                            CommonResources.OptionPleaseSelect,
                            new { @class = "form-control input-sm" })
                        @Html.ValidationMessageFor(m => m.Classification, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.AccountOpenedDate, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.AccountOpenedDate, new { @class = "form-control input-sm datepicker" })
                        @Html.ValidationMessageFor(m => m.AccountOpenedDate, "", new { @class = "text-danger" })
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.RelationshipSince, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.RelationshipSince, new { @class = "form-control input-sm yearpicker" })
                        @Html.ValidationMessageFor(m => m.RelationshipSince, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.FacilityGrantedDate, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.FacilityGrantedDate, new { @class = "form-control input-sm datepicker" })
                        @Html.ValidationMessageFor(m => m.FacilityGrantedDate, "", new { @class = "text-danger" })
                    </td>
                    <td class="fieldname">
                        @Html.LabelFor(m => m.MoreThan50TurnoverInd, new { @class = "control-label" })
                    </td>
                    <td>
                        @Html.RadioButtonFor(m => m.MoreThan50TurnoverInd, "Y") @CommonResources.OptionYes
                        @Html.RadioButtonFor(m => m.MoreThan50TurnoverInd, "N") @CommonResources.OptionNo <br />
                        @Html.ValidationMessageFor(m => m.MoreThan50TurnoverInd, "", new { @class = "text-danger" })
                    </td>
                </tr>
            </table>
        </section>
    </fieldset>
    
    @Html.Partial("_Address", Model)

    @Html.Partial("_RmReference", Model.RelationshipManager, new ViewDataDictionary
    {
        TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "RelationshipManager" }
    })

    <br />
    <div class="form-group">
        <div class="col-sm-12 text-center">
            @Html.HiddenFor(m => m.Id)
            @Html.HiddenFor(m => m.CustomerType)

            <input type="submit" name="actionType" value="@CommonResources.ButtonSave" class="btn btn-default btn-sm" />
            <input type="submit" name="actionType" value="@CommonResources.ButtonCancel" class="btn btn-default btn-sm cancel" />
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/smartlender")

    <script type="text/javascript">
    $(function () {
        $('.datepicker').datepicker({
            format: 'dd/mm/yyyy',
            todayHighlight: true
        });
        $(".yearpicker").datepicker({
            format: ' yyyy', // Do not remove the extra space.
            viewMode: 'years',
            minViewMode: 'years'
        });
        $("#copyBusinessAddr").click(function () {
            $('[name="Address.MailingAddress.AddressFormat"]').val(
                $('[name="Address.RegisteredAddress.AddressFormat"]').val());
            $('[name="Address.MailingAddress.StructuredBlock"]').val(
                $('[name="Address.RegisteredAddress.StructuredBlock"]').val());
            $('[name="Address.MailingAddress.StructuredStreet"]').val(
                $('[name="Address.RegisteredAddress.StructuredStreet"]').val());
            $('[name="Address.MailingAddress.StructuredStorey"]').val(
                $('[name="Address.RegisteredAddress.StructuredStorey"]').val());
            $('[name="Address.MailingAddress.StructuredUnit"]').val(
                $('[name="Address.RegisteredAddress.StructuredUnit"]').val());
            $('[name="Address.MailingAddress.StructuredBuilding"]').val(
                $('[name="Address.RegisteredAddress.StructuredBuilding"]').val());
            $('[name="Address.MailingAddress.StructuredCity"]').val(
                $('[name="Address.RegisteredAddress.StructuredCity"]').val());
            $('[name="Address.MailingAddress.StructuredPostalCode"]').val(
                $('[name="Address.RegisteredAddress.StructuredPostalCode"]').val());
            $('[name="Address.MailingAddress.StructuredCountry"]').val(
                $('[name="Address.RegisteredAddress.StructuredCountry"]').val());
            $('[name="Address.MailingAddress.StructuredPoBox"]').val(
                $('[name="Address.RegisteredAddress.StructuredPoBox"]').val());
            $('[name="Address.MailingAddress.UnstructuredAddress1"]').val(
                $('[name="Address.RegisteredAddress.UnstructuredAddress1"]').val());
            $('[name="Address.MailingAddress.UnstructuredAddress2"]').val(
                $('[name="Address.RegisteredAddress.UnstructuredAddress2"]').val());
            $('[name="Address.MailingAddress.UnstructuredAddress3"]').val(
                $('[name="Address.RegisteredAddress.UnstructuredAddress3"]').val());
            $('[name="Address.MailingAddress.UnstructuredAddress4"]').val(
                $('[name="Address.RegisteredAddress.UnstructuredAddress4"]').val());
        });
        @if (ViewBag.DisplayMode == ClosDotNet.Helper.DisplayMode.View)
        {
            <text>
            prepareCheckerMode();
            </text>
        }
    });
    </script>
}